<!DOCTYPE html>
<html>
<head>
  <title>–ê–¥–≤–µ–Ω—Ç-–∫–∞–ª–µ–Ω–¥–∞—Ä—å (15 –¥–µ–∫ ‚Äì 14 —è–Ω–≤)</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <h2>üéÑ –ê–¥–≤–µ–Ω—Ç-–∫–∞–ª–µ–Ω–¥–∞—Ä—å: 15 –¥–µ–∫–∞–±—Ä—è ‚Äì 14 —è–Ω–≤–∞—Ä—è</h2>
  <p>–ü—Ä–∏–≤–µ—Ç, <strong>{{ user }}</strong>! –û—Ç–∫—Ä—ã–≤–∞–π –¥–≤–µ—Ä–∏ –ø–æ –æ–¥–Ω–æ–π ‚Äî —Ç–æ–ª—å–∫–æ –≤ —Å–≤–æ–π —á–µ—Ä–µ–¥!</p>

  <!-- üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ –ø—Ä–∏–∑—ã ‚Äî –µ–¥–∏–Ω—ã–π –±–ª–æ–∫ -->
  <div class="task" style="max-width: 700px; margin: 30px auto; padding: 20px; background: #f8f9fa; border-radius: 12px; border: 1px solid #e0e0e0;">
    
    <!-- üåç –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å -->
    <h3>üåç –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–æ–º–∞–Ω–¥—ã: {{ global_total }}/2026</h3>
    <progress value="{{ global_total }}" max="2026" style="width: 100%; height: 24px;"></progress>

    <!-- üìà –õ–∏—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å -->
    <h3>üë§ –í–∞—à –ª–∏—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å: {{ personal_total }}/2026</h3>
    <progress value="{{ personal_total }}" max="2026" style="width: 100%; height: 24px;"></progress>

    <!-- üéØ –ü—Ä–∏–∑—ã -->
    <h3 style="margin-top: 25px; border-top: 1px solid #ddd; padding-top: 15px;">üéØ –ù–∞–≥—Ä–∞–¥—ã –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>

    <!-- –õ–∏—á–Ω—ã–µ –ø—Ä–∏–∑—ã -->
    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
      <thead>
        <tr style="background: #1976d2; color: white; font-size: 14px;">
          <th style="padding: 10px; text-align: left;">–ü—Ä–∏–∑ (–ª–∏—á–Ω—ã–π)</th>
          <th style="padding: 10px; text-align: left; width: 100px;">–¶–µ–ª—å</th>
          <th style="padding: 10px; width: 60px;">–°—Ç–∞—Ç—É—Å</th>
        </tr>
      </thead>
      <tbody>
        {% for reward in reward_targets.personal %}
          {% set achieved = personal_total >= reward.points %}
          <tr style="border-bottom: 1px dashed #eee;">
            <td style="padding: 10px; font-weight: 500; color: #333;">{{ reward.name }}</td>
            <td style="padding: 10px; color: #666;">{{ reward.points }}</td>
            <td style="text-align: center;">
              {% if achieved %}<span style="color: #4caf50; font-size: 20px;">‚úÖ</span>{% else %}<span style="color: #ccc;">‚¨ú</span>{% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <!-- –ö–æ–º–∞–Ω–¥–Ω—ã–µ –ø—Ä–∏–∑—ã -->
    <table style="width: 100%; border-collapse: collapse; margin: 25px 0 10px;">
      <thead>
        <tr style="background: #7b1fa2; color: white; font-size: 14px;">
          <th style="padding: 10px; text-align: left;">–ü—Ä–∏–∑ (–∫–æ–º–∞–Ω–¥–∞)</th>
          <th style="padding: 10px; text-align: left;">–¶–µ–ª—å</th>
          <th style="padding: 10px; width: 60px;">–°—Ç–∞—Ç—É—Å</th>
        </tr>
      </thead>
      <tbody>
        {% for reward in reward_targets.global %}
          {% set achieved = global_total >= reward.points %}
          <tr style="border-bottom: 1px dashed #eee;">
            <td style="padding: 10px; font-weight: 500; color: #333;">{{ reward.name }}</td>
            <td style="padding: 10px; color: #666;">{{ reward.points }} –æ–±—â–∏—Ö</td>
            <td style="text-align: center;">
              {% if achieved %}<span style="color: #4caf50; font-size: 20px;">‚úÖ</span>{% else %}<span style="color: #ccc;">‚¨ú</span>{% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- –ü–æ–¥–ø–∏—Å—å -->
  <p style="text-align: center; color: #777; font-size: 14px; margin-top: 10px;">
    ‚úÖ ‚Äî —Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞<br>
    ‚¨ú ‚Äî –µ—â—ë –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞
  </p>

  <!-- –ö–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è -->
  <div class="download">
    <button class="download-btn" onclick="downloadFile()">
      üíæ –í–û–ó–í–†–ê–©–ï–ù–ò–ï?
    </button>
  </div>

  <script>
    function downloadFile() {
      const fileURL = 'https://drive.google.com/file/d/10Xck2lGlbMAqgWJ13gIzjC_tsozqSSt-/view?usp=sharing';
      const fileName = '–ü–†–ï–î–ù–ê–ß–ï–†–¢–ê–ù–ù–û–°–¢–¨.rar';
      const link = document.createElement('a');
      link.href = fileURL;
      link.download = fileName;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }
  </script>

  <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
  <div class="calendar">
    {% for item in calendar_days %}
      <div class="door {% if can_open(item.day) %}open{% else %}locked{% endif %}">
        <div>–î–µ–Ω—å {{ item.day }}</div>
        <div class="date">{{ item.date }}</div>

        {% if item.day in available_days %}
          {% if item.day in opened_days %}
            <span style="color: green;">–û—Ç–∫—Ä—ã—Ç–æ ‚úÖ</span>
          {% else %}
            <form action="/open_day" method="post" style="display:inline;">
              <input type="hidden" name="day" value="{{ item.day }}">
              <a href="/day/{{ item.day }}" class="btn">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–¥–∞–Ω–∏–µ</a>
            </form>
          {% endif %}
        {% else %}
          <span>üîí</span>
        {% endif %}
      </div>
    {% endfor %}
  </div>

  {% if is_admin %}
    <p><a href="/admin">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É</a></p>
  {% endif %}

  <div class="logout">
    <a href="/logout">–í—ã–π—Ç–∏</a>
  </div>
</body>
</html>
